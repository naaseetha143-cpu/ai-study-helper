<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Syllabus Planner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <div class="card">
        <h1>Syllabus Planner</h1>
        <p>Paste your syllabus (one topic per line)</p>

        <form method="post">
            <textarea name="syllabus" rows="6"
                      placeholder="Unit 1: Basics
Unit 2: Core Concepts
Unit 3: Advanced Topics" required></textarea>

            <button type="submit">Generate Roadmap</button>
        </form>

        {% if roadmap %}
            <h3>Study Roadmap</h3>
            {% for day in roadmap %}
                <p>{{ day }}</p>
            {% endfor %}
        {% endif %}

        <hr style="margin:40px 0; opacity:0.3;">

        <h3>AI Study Assistant</h3>

        <div id="chat-box" style="max-height:250px; overflow-y:auto;"></div>

        <form id="chat-form">
            <input type="text" id="user-input"
                   placeholder="Ask: Give Day 1 quiz" required>
            <button type="submit">Send</button>
        </form>

        <a href="/">‚Üê Back to Home</a>
    </div>
</div>

<script>
const chatForm = document.getElementById("chat-form");
const chatBox = document.getElementById("chat-box");
const userInput = document.getElementById("user-input");

chatForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const msg = userInput.value;
    chatBox.innerHTML += `<p><b>You:</b> ${msg}</p>`;
    userInput.value = "";

    const res = await fetch("/chat", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({message: msg})
    });

    const data = await res.json();
    chatBox.innerHTML += `<p><b>AI:</b> ${data.reply}</p>`;
    chatBox.scrollTop = chatBox.scrollHeight;
});
</script>
</body>
</html>
